# integration-test
Big integration test of all tools

Text stolen from Martin Schäf's email:

Right now, this repo only contains stubs and has no test oracles but we hope to get everyone involved very soon. Each part of the system has a subfolder which contains a script to run one of our tools. Some subfolders still have to be added. The integration story we have in mind is as follows (and please yell if that doesn’t work for you):

We start from the corpus. First step is a dynamic analysis (which we only have to do once per corpus project). The dynamic analysis is found in the folder:
./dynamic_analysis
	This contains files to download and run Randoop on all projects in the corpus. Next, we will add a Daikon run as well. The test cases are added in subfolders of the corresponding corpus projects. The dynamic analysis currently has no output (other then generating tests) because we didn’t not yet agree with Mayur on the kind of input he wants.

After the dynamic analysis we perform type inference using the files in
./type_inference
	These files currently only download the checker framework etc and run the regression tests. In the long run, this should get a mapping file from Java types to Annotations (provided by Howie). Propagate the types around and produce a .jiaf file that is passed to Petablox to update the LB representation of the corpus.

Next, we call PetaBlox on all corpus projects. Those scrips are in
./into_logicblox
	Currently, this only does the regular full program analysis with bddbddb. The big step here will be to figure out a way to put all projects into one LB instance and to deal with programs without multiple or no entries. I’d like to start a discussion on this asap because this will eventually be to center of all other activity.

Finally, we have a graph generation in:
./graph_generation
	This is just running the scripts that we used in the demo workshop generate dot files for each corpus project and precompute the graph kernels (and store them in ./graph_generation/kernels.txt). In the long run, the dot generation should be moved into the LB part. The graph generation uses the type annotations generated by Werner where available to label the nodes.



Results of all tools running can be found on Travis: 
[![Click here to see the Results of the experiments on TravisCI](https://travis-ci.org/aas-integration/integration-test.svg?branch=master)](https://travis-ci.org/aas-integration/integration-test)

# Obtaining LogicBlox

LogicBlox is released every month. It is available for download at
https://download.logicblox.com . To obtain a username and password for
this website, please fill out the form at
http://www.logicblox.com/learn/academic-license-request-form/ and
indicate that you are a MUSE team member.

LogicBlox offers Linux 64-bit as well as OSX distributions. If you
problems installing LogicBlox, please contact
muse-users@logicblox.com. You might want to be signed up for this
group as well!

Documentation is available at
https://developer.logicblox.com/documentation/ . Depending on what you
are most interested in, you want to check the reference manual or the
admin manual.

Just email martin.bravenboer@logicblox.com if you have any further
questions.

# Updating the Corpus Submodule

By default, doing a `https://github.com/aas-integration/integration-test.git` won't pull the `corpus` submodule along with the parent repository. To pull the `corpus` submodule, you need to run `git submodule init` and then `git submodule update`:

```bash
› git submodule init
Submodule 'corpus' (https://github.com/aas-integration/mini_corpus) registered for path 'corpus'
```

This registers the `corpus` submodule in the correct path, 'corpus', but doesn't clone its content. 

```bash
› git submodule update
Cloning into 'corpus'...
remote: Counting objects: 173, done.
remote: Compressing objects: 100% (6/6), done.
remote: Total 173 (delta 0), reused 0 (delta 0), pack-reused 165
```

The `git module update` command actually pulls the content for the registered `corpus` submodule. You have now a working copy of the `integration-test` repository, submodules intact.

The `corpus` submodule is a Git repository inside another. Therefore, as long as you are in the submodule directory, all the normal Git actions like push, pull, reset, log, status, etc. work as normal.

If you want to make sure that the `corpus` submodule is up-to-date with the remote repository, do a `git pull` (don't use submodule) when you are in the corpus directory:

```bash
› cd corpus
› git pull
You are not currently on a branch. Please specify which
branch you want to merge with. See git-pull(1) for details.

    git pull <remote> <branch>
```

If you get the above error message that says that you aren't on any branch, do a `git checkout master` to fix it.

```bash
› git checkout master
Previous HEAD position was 13d0550...
Switched to branch 'master'
Your branch is up-to-date with 'origin/master'.
```

The submodule is pointing to a particular commit, and if the commit changes then the parent repository registers the change. If your `corpus` submodule did have some updates when you did a pull then your parent repository will tell you that there are some changes to commit. To check for updates, go back to the parent directory and then do a `git status`:


```bash
› cd ..
› git status
On branch master
Your branch is up-to-date with 'origin/master'.
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

	modified:   corpus (new commits)

no changes added to commit (use "git add" and/or "git commit -a")
```

If it looks like you need to commit some changes run a `git commit -am`:

```bash
› git commit -am "updates corpus submodule"
[master 9a30fb5] updates corpus submodule
 1 file changed, 1 insertion(+), 1 deletion(-)
```

When this commit is pushed to the remote repository the `corpus` submodule will be associated with that particular commit.

